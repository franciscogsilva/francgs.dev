---
import Navigation from "./NavigationItem.astro";

interface Props {
  lang?: "en" | "es";
}

const { lang } = Astro.props as Props;
const localePrefix = lang ? `/${lang}` : "";

const homeUrl = localePrefix || "/";
const categoriesUrl = localePrefix ? `${localePrefix}/blog/category` : "/blog/category";
const tagsUrl = localePrefix ? `${localePrefix}/tags` : "/tags";

const otherLang = lang === "es" ? "en" : "es";
const currentPath = Astro.url.pathname;
const currentSearch = Astro.url.search;

const switchToLangPath = lang
  ? currentPath === `/${lang}`
    ? `/${otherLang}${currentSearch}`
    : currentPath.startsWith(`/${lang}/`)
      ? `/${otherLang}/${currentPath.slice(lang.length + 2)}${currentSearch}`
      : `/${otherLang}${currentSearch}`
  : "/en";

const esPath =
  lang === "es" ? `${currentPath}${currentSearch}` : lang ? switchToLangPath : "/es";
const enPath =
  lang === "en" ? `${currentPath}${currentSearch}` : lang ? switchToLangPath : "/en";
---

<header class="flex justify-center items-center p-6 lg:px-8 max-w-7xl">
  <nav class="flex flex-row gap-x-10 mx-auto opacity-80">
    <Navigation url={homeUrl}>Home</Navigation>
    <Navigation url="/snippets">
      <svg
        viewBox="0 0 24 24"
        fill="currentColor"
        style="width: 20px; height: 20px;"
        ><path
          d="M8,3A2,2 0 0,0 6,5V9A2,2 0 0,1 4,11H3V13H4A2,2 0 0,1 6,15V19A2,2 0 0,0 8,21H10V19H8V14A2,2 0 0,0 6,12A2,2 0 0,0 8,10V5H10V3M16,3A2,2 0 0,1 18,5V9A2,2 0 0,0 20,11H21V13H20A2,2 0 0,0 18,15V19A2,2 0 0,1 16,21H14V19H16V14A2,2 0 0,1 18,12A2,2 0 0,1 16,10V5H14V3H16Z"
        ></path>
      </svg>
      Snippets
    </Navigation>
    <Navigation url={tagsUrl}>
      <svg
        class="icon icon-tabler icon-tabler-tag"
        width="21"
        height="21"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
        fill="none"
      >
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M7.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path>
        <path
          d="M3 6v5.172a2 2 0 0 0 .586 1.414l7.71 7.71a2.41 2.41 0 0 0 3.408 0l5.592 -5.592a2.41 2.41 0 0 0 0 -3.408l-7.71 -7.71a2 2 0 0 0 -1.414 -.586h-5.172a3 3 0 0 0 -3 3z"
        ></path>
      </svg>
      Tags
    </Navigation>
    <Navigation url={categoriesUrl}>
      <svg
        class="icon icon-tabler icon-tabler-category"
        width="21"
        height="21"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
        fill="none"
      >
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M4 4h6v6h-6z"></path>
        <path d="M14 4h6v6h-6z"></path>
        <path d="M4 14h6v6h-6z"></path>
        <path d="M14 14h6v6h-6z"></path>
      </svg>
      Categories
    </Navigation>
    <Navigation url="/about">
      <svg
        class="icon icon-tabler icon-tabler-user"
        width="21"
        height="21"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
        fill="none"
      >
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0"></path>
        <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"></path>
      </svg>
      About
    </Navigation>
    {
      lang && (
        <div class="flex items-center gap-2 text-sm font-semibold leading-6 opacity-80">
          <a
            href={esPath}
            class={`hover-underline-animation ${
              lang === "es" ? "text-primary" : "text-gray-500 dark:text-gray-400"
            }`}
            >ES</a
          >
          <span class="text-gray-500 dark:text-gray-400">|</span>
          <a
            href={enPath}
            class={`hover-underline-animation ${
              lang === "en" ? "text-primary" : "text-gray-500 dark:text-gray-400"
            }`}
            >EN</a
          >
        </div>
      )
    }
  </nav>
</header>
