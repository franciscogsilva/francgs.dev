---
import { getCollection } from "astro:content";
import PostCard from "../components/PostCard.astro";
import data from "../data/site.json";
import BaseLayout from "../layouts/BaseLayout.astro";
import { sortPostsByPubDateDesc } from "../utils/sortPosts";

const posts = sortPostsByPubDateDesc(await getCollection("blog", ({ data }) => !data.draft));
---

<BaseLayout title={data.siteTitle} description={data.siteDescription}>
  <section class="pt-12 pb-8 space-y-2 sm:space-y-5 md:space-y-4 md:w-[550px]">
    <h1
      class="text-4xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:leading-10 md:leading-14"
    >
      Hey, I'm
      <a class="hover-underline-animation text-primary" href="/about"
        >{data.nickName}</a
      >
      <span class="wave" role="img" aria-label="Hello"> ğŸ‘‹ğŸ½</span>
    </h1>
    <h2 class="text-lg font-extralight text-gray-600 dark:text-gray-400 pt-1">
      I solve problems, sometimes with code, always with coffee â˜•ï¸. Tech Lead &
      Sr. Software Developer with <strong class="text-secondary"
        >+9 years of experience</strong
      >.
    </h2>
    <p class="font-thin text-gray-600 dark:text-gray-400 pt-0.5">
      Here is
      <a
        target="_blank"
        href="/about"
        class="icon-link hover-underline-animation font-medium inline-flex flex-row items-center gap-2"
      >
        more information about me
      </a>
      ğŸ’¡. I also have
      <a
        target="_blank"
        href="/links"
        class="icon-link hover-underline-animation font-medium inline-flex flex-row items-center gap-2"
      >
        some magic links
      </a>
      ğŸ”®.
    </p>
  </section>
  <div class="grid grid-cols-1 gap-6 mt-12">
    {
      posts.map((post) => (
        <PostCard
          pubDate={post.data.pubDate.toISOString()}
          url={`/blog/${post.id}`}
          title={post.data.title}
          tags={post.data.tags}
          description={post.data.description}
          hideDate={post.data.pubDate.getTime() > Date.now()}
        />
      ))
    }
  </div>
</BaseLayout>
