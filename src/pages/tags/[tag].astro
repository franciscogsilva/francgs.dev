---
export const prerender = false;

const { tag } = Astro.params;
if (!tag) {
  return Astro.redirect("/", 302);
}

const cookieLang = Astro.cookies.get("site_lang")?.value;
const preferredLang =
  cookieLang === "es" || cookieLang === "en"
    ? cookieLang
    : Astro.request.headers.get("accept-language")?.toLowerCase().includes("es")
      ? "es"
      : "en";

return Astro.redirect(`/${preferredLang}/tags/${tag}/`, 302);
---
